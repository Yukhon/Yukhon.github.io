<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: true,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="Yukhon&#39;s tech blogs">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Yukhon&#39;s tech blogs">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Yukhon&#39;s tech blogs">





  
  
  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Yukhon's tech blogs</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yukhon's tech blogs</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">Stay hungry,stay foolish.</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">

    
    
    
      
    

    

    <a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益 404</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/09/Linux setting up/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/12/09/Linux setting up/" class="post-title-link" itemprop="url">Linux environment setting up</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-12-09 00:00:00" itemprop="dateCreated datePublished" datetime="2020-12-09T00:00:00+11:00">2020-12-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-12-10 00:32:57" itemprop="dateModified" datetime="2020-12-10T00:32:57+11:00">2020-12-10</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/12/09/Linux setting up/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/12/09/Linux setting up/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">463</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>做GNN, 可能需要jaxlib的包, 找了很久都没有 支持windows的办法, 于是就在虚拟机弄了个linux的开发环境。 (虽然jaxlib说没检测到我的GPU最后也没用上,伤心) 附几个链接给自己后来需要的话一个参考</p>
<p>Virtual machine setting up:<br>B站 AV号: BV1t54y1R7F3 脚本没用上,以后可以看看他的环境怎么样<br>miniconda:<br>原本想装 anaconda, 出错查了查是存储给小了, 又懒得重设了装了miniconda. 参考 <a href="https://zhuanlan.zhihu.com/p/69799707" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/69799707</a></p>
<p>Linux jupyter notebook的安装  用vscode 远程操控文件 <a href="https://blog.csdn.net/codingpy/article/details/105803890" target="_blank" rel="noopener">https://blog.csdn.net/codingpy/article/details/105803890</a><br>这里 有一个bug, 可能是firefox浏览缓存或者 未设置cookie的bug, 目前是重启，到时候遇到了再说吧</p>
<p>还有虚拟机隐藏问题</p>
<p>TODO: 将虚拟机图形界面隐藏 </p>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
      
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/01/Hamiltonian Neural Networks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/12/01/Hamiltonian Neural Networks/" class="post-title-link" itemprop="url">HNN summary</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-12-01 00:00:00" itemprop="dateCreated datePublished" datetime="2020-12-01T00:00:00+11:00">2020-12-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-12-10 00:34:54" itemprop="dateModified" datetime="2020-12-10T00:34:54+11:00">2020-12-10</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/12/01/Hamiltonian Neural Networks/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/12/01/Hamiltonian Neural Networks/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Background-knowledge"><a href="#Background-knowledge" class="headerlink" title="Background knowledge"></a>Background knowledge</h1><p>Forgive my poor physics knowledge, I have to summarize something about Hamiltonian mechanics.</p>
<p>We can represent an object state represented by the combination of its momentum space and position space coordinates. </p>
<p>With time stamp, we can build a model to describe trajectory of object f(p, q, t)</p>
<p>Hamiltonian mechanics is kind of representation of the state, represented as<br>$$<br>\frac{\partial q}{\partial t} = \frac{\partial \mathcal{H}}{p}(a)\<br>\frac{\partial p}{\partial t} = -\frac{\partial \mathcal{H}}{q}(b)<br>$$</p>
<p>where $\mathcal{H}$ is actually an representation of object energy(which is constant). That’s an efficient way for us to derive S, which is (a, b), then use S predict the next state:<br>$$<br>s_1 = s_0 + \int_{t_0}^{t_1} S_{\mathcal{H}} dt<br>$$</p>
<h1 id="why-to-introduce-Hamiltonian-mechanics"><a href="#why-to-introduce-Hamiltonian-mechanics" class="headerlink" title="why to introduce Hamiltonian mechanics"></a>why to introduce Hamiltonian mechanics</h1><p>Because previous methods are not based on conservation law, so error accumulates (I think it’s something like gradient explosion for RNN). Instead, Hamilton addresses the problem perfectly as it’s based on the conservation laws. </p>
<h1 id="features"><a href="#features" class="headerlink" title="features"></a>features</h1><p>Before the neural network starts, we know some physical laws and use it to adjust the architecture of neural networks, including loss function, etc.</p>
<h1 id="further"><a href="#further" class="headerlink" title="further"></a>further</h1><h1 id="some-thoughts-about-it"><a href="#some-thoughts-about-it" class="headerlink" title="some thoughts about it"></a>some thoughts about it</h1><ul>
<li>With the condition of vacuum(frictionless), HNN is perfect for planet orbit prediction(maybe some restriction of pixel, there are many noise data, it’s another problem needed to tackle) </li>
<li>Since HNN could handle multiple body system, then it would be easier when tackling the relation between stars and its satellites. the session in this paper ‘learning a Hamiltonian form pixels’ would be an good example. </li>
</ul>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/05/NLP-revision(2)/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/11/05/NLP-revision(2)/" class="post-title-link" itemprop="url">NLP revision(2)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-11-05 15:35:44" itemprop="dateCreated datePublished" datetime="2020-11-05T15:35:44+11:00">2020-11-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-12-10 00:31:19" itemprop="dateModified" datetime="2020-12-10T00:31:19+11:00">2020-12-10</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/11/05/NLP-revision(2)/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/11/05/NLP-revision(2)/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">909</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Representation"><a href="#Representation" class="headerlink" title="Representation"></a>Representation</h1><h2 id="one-hot-vector"><a href="#one-hot-vector" class="headerlink" title="one hot vector"></a>one hot vector</h2><p>represent the word in a 0-1 vector, the length would be the the length of dictionary.<br>Obviously, it’s too space consuming.</p>
<h2 id="Context-based-Word-Representation"><a href="#Context-based-Word-Representation" class="headerlink" title="Context-based Word Representation"></a>Context-based Word Representation</h2><p>Word Co-occurrence Matrix: refer to slides <a href="https://wattlecourses.anu.edu.au/pluginfile.php/2424243/mod_resource/content/1/ML2-Representation.pdf" target="_blank" rel="noopener">P12</a></p>
<p>为什么会提出这种matrix呢， 我理解的是一旦这个词后面紧跟 的词 相似的话那就说明 这两个词至少可以用法相同</p>
<p>PMI(Pairwise Mutual Information): </p>
<p>$$<br>PMI_{i,j} = log \frac{P(w_{i,j})}{P(w_i)P(w_j)}<br>$$<br>就是求 联合概率 用log scale.</p>
<p>After that, we can calculate similarity through cos(i, j)</p>
<p>However, there still exists the matrix that has high dimensionality and sparsity problem, we use SVD to decrease dimentions. </p>
<h2 id="Word-vector-gt-Word2vec"><a href="#Word-vector-gt-Word2vec" class="headerlink" title="Word vector == &gt; Word2vec"></a>Word vector == &gt; Word2vec</h2><p>distributed representations.</p>
<p>将 word 转化为向量，在有限的window里面预测word。</p>
<h2 id="Supervised-learning"><a href="#Supervised-learning" class="headerlink" title="Supervised learning"></a>Supervised learning</h2><h3 id="Linear-Regression"><a href="#Linear-Regression" class="headerlink" title="Linear Regression"></a>Linear Regression</h3><p>Nothing needs to pick up… I think</p>
<h3 id="deep-neural-network"><a href="#deep-neural-network" class="headerlink" title="deep neural network"></a>deep neural network</h3><p>activate function: to change every ‘neural’ from linear regression to non-linear one.</p>
<p>Normal activate function: Rectified Linear Unit(Relu) == max(0,x)</p>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/11/05/NLP-revision/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/11/05/NLP-revision/" class="post-title-link" itemprop="url">NLP revision(1)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-11-05 15:35:44" itemprop="dateCreated datePublished" datetime="2020-11-05T15:35:44+11:00">2020-11-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-11-08 21:47:45" itemprop="dateModified" datetime="2020-11-08T21:47:45+11:00">2020-11-08</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/11/05/NLP-revision/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/11/05/NLP-revision/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">6.6k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">6 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>At the end of semester, I would like to pick some keys regarding the course ‘document analysis, especially for the part of NLP. For easily viewing by myself, I would mix some mandarin for conceptional explanation.</p>
<h1 id="Boolean-Retrieval"><a href="#Boolean-Retrieval" class="headerlink" title="Boolean Retrieval"></a>Boolean Retrieval</h1><p>(Originally presented as Term-document incidence matrix): 0-1 matrix, row represents different document, column represents different terms.</p>
<p>But with Bigger collections, 0-1 matrix would be extremely sparse, so we introduce inverted matrix. </p>
<p><strong>inverted matrix</strong>: Dictionary, the key refers to each term, to simplify, the corresponding values would be a list containing document ids including the term.(We call the list as posting)</p>
<p><strong>INDEXER</strong>: Construct inverted index from raw text</p>
<p>To prepare for the process of indexer, we need to preprocess the raw data.</p>
<p><strong>Initial Stages of Text Processing</strong></p>
<ul>
<li>Tokenization<ul>
<li>Cut character sequence into word tokens</li>
<li>Deal with “John’s”, a state-of-the-art solution</li>
<li>while space tokenizer is always not enough</li>
<li>Regex is recommended</li>
</ul>
</li>
<li>Stop words(removal)<ul>
<li>We may omit very common words (or not)</li>
<li>E.g. the, a, to, </li>
</ul>
</li>
<li>Normalization<ul>
<li>Map text and query term to same form</li>
<li>You want U.S.A. and USA to match</li>
</ul>
</li>
<li>Stemming and lemmatization<ul>
<li>stemming: 把各种词的三单，时态，复数 转换为单词的原型或词根模式</li>
<li>lemmatization: 将同义词合并在一起  </li>
</ul>
</li>
</ul>
<h1 id="Ranked-Retrieval"><a href="#Ranked-Retrieval" class="headerlink" title="Ranked Retrieval"></a>Ranked Retrieval</h1><p>Ranked Retrieval: Boolean retrieval cares little about the order of the text. We need to consider it in NLP implementation.</p>
<p>Or we may say Boolean Retrieval is establish on Bag-Of-Words(BOW) Assumption.</p>
<p>或者说 由于Boolean Retrieval 本身必须是所有的关键词都存在于文件中，它本身没有一个缓冲机制</p>
<p>To improve this a little bit, we mark the inverted matrix with the location the term (token) is retrieved from. (Title, Author, Published date, Body)</p>
<p>However, the problem cannot be eradicated within the Boolean Retrieval, therefore, the ranked retrieval(<strong>RR</strong>) is introduced.</p>
<p>Ideas of RR: We need to find some score function. When the query comes into the system, the documents would be sorted by this score function, representing the closeness between the query and documents.</p>
<p><strong>Variations 1</strong>: Scoring with Weighted Fields, assign location with weights and sum it up.</p>
<p><strong>Term frequency</strong>: Sum up the number of occurrence of all the keys in a query. </p>
<p>CONs of TF: what about each term has different importance? How to mitigate the effect of terms that occur too often in the collection?</p>
<p>也就是说有可能 某个key可能在每个文件都出现过，那么它的优先级就不是那么高，就跟之前的stopwords 一样</p>
<p><strong>Measure the importance: Document Frequency(DF)</strong>: the number of documents in the collection that contains some desired term t</p>
<p>To measure the importance intuitively, we introduce inverse document frequency(IDF), where<br>$$<br>IDF_t = log \frac{N}{DF_t}<br>$$</p>
<p>Then we can combine the two methods together, becoming various <strong>TF-IDF measurement</strong></p>
<p>$$<br>Score_{tf-idf}(d, q) = \sum_{i=1}^{m} tf-idf_{ti,d}<br>$$</p>
<p>CONs:<br>Score linearly increases with respect to frequency of term, which is inconsistent with the actual conditions. After a certain frequency, the absolute frequency isn’t important.</p>
<p>Solution: We introduce the weighted term frequency(wf), see <a href="https://wattlecourses.anu.edu.au/pluginfile.php/2424225/mod_resource/content/0/Lec2_Ranked_2020_-2.pdf" target="_blank" rel="noopener">slides 27</a> (not the point of this revision)</p>
<p>Drawbacks： Both scoring prefers longer documents</p>
<p>Solution: introduce Maximum tf normalization, where</p>
<p>$$<br>ntf_{t, d} = \alpha + (1 - \alpha) \frac{tf_{t,d}}{tf_{max}(d)}<br>$$</p>
<p>Every variants is not perfect though.</p>
<p>Seeing the data structure of vector in IR system. We could introduce vector model (more precisely, similarity model), it could be another source of scoring.</p>
<p>OK, that’s basically all the content about IR system, then let’s talk about the evaluation.</p>
<p>Especially, we focus most on the efficiency </p>
<p>For <strong>Boolean Retrieval</strong>, we split the collections into: Retrieved, not retrieved</p>
<p>也就是说当文件被 Boolean 处理时 系统只会提取 docs 都contain 所有keys 里面的和 剩下的</p>
<p>Normally, we introduce Contingency Table </p>
<p>Row index represents ground truth</p>
<table>
<thead>
<tr>
<th></th>
<th>Relevant</th>
<th>Not Relevant</th>
</tr>
</thead>
<tbody><tr>
<td>Retrieved</td>
<td>true positive(tp)</td>
<td>false positive(fp)</td>
</tr>
<tr>
<td>Not Retrieved</td>
<td>false negative(fn)</td>
<td>true negative(tn)</td>
</tr>
</tbody></table>
<p>我的理解: 第一个true or false 是判断实际情况是否与ground truth 相符，理想情况下，好的IR system 需要将所有的groud truth docs 都给提取出来，那么与理想情况相反的就是false，一致就是true。 后面的 的positive 和negative 则是 根据retrieve or not 体现的</p>
<p>Some measures relevant: </p>
<p>$$<br>Precision = \frac{tp}{tp + fp}\<br>Recall = \frac{tp}{tp + fn}\<br>Accuracy = \frac{tp + tn}{tp + tn + fn + fp}<br>$$</p>
<p>Accuracy is useless in the field of evaluation 因为我们在evaluate 的时候只foucs on tp</p>
<p>then F1-measure,</p>
<p>$$<br>F_1 = \frac{Precision * Recall}{Precision + Recall}<br>$$</p>
<p>For <strong>ranked retrieval</strong> sets :</p>
<ul>
<li>Unlike the previous example, the system<br>retrieved all documents in our collection.</li>
<li>Precision &amp; Recall cannot be directly<br>applied in this case.</li>
<li>Need a metric to measure the performance<br>of ranked list!</li>
</ul>
<p>就是说因为RR会retrieve所有的docs， 所以我们需要在retrieve n个 文件时统计各自的precision and recall, 这就是 Precision-Recall Curve</p>
<p>The Curve ends when recall reaches 1;</p>
<p>Interpolated Average Precision : 就是将所有的precision-recall点 放在图中 (无retrieved 文件顺序) 良好的system 会呈直线分布</p>
<p>Mean Reciprocal Rank(MRR): 所有query 在此IR system 第一个groud truth 的倒数的平均数</p>
<h1 id="When-IR-meets-the-web"><a href="#When-IR-meets-the-web" class="headerlink" title="When IR meets the web"></a>When IR meets the web</h1><p><strong>citation analysis</strong> </p>
<h2 id="web-analysis"><a href="#web-analysis" class="headerlink" title="web analysis"></a>web analysis</h2><p><strong>Authority</strong>: Authorities are pages that are recognized as providing significant, trustworthy, and useful information on a topic.</p>
<p><strong>Hubs</strong>: Hubs are index pages that provide lots of useful links to relevant content pages </p>
<h3 id="Hyperlink-Induced-Topic-Search-HITS-algorithm"><a href="#Hyperlink-Induced-Topic-Search-HITS-algorithm" class="headerlink" title="Hyperlink-Induced Topic Search (HITS algorithm)"></a>Hyperlink-Induced Topic Search (HITS algorithm)</h3><ol>
<li>For a specific query Q, let the set of documents<br>returned by a standard search engine (e.g. VSR) be<br>called the root set R.</li>
<li>Initialize S to R.</li>
<li>Add to S all pages pointed to by any page in R. – include potential hubs</li>
<li>Add to S all pages that point to any page in R. – include potential authority</li>
</ol>
<p>Of course then we can eliminate some dirty webpages by some rules.</p>
<p>We set 2 sub scores: Authority score, Hubs score. Initially, we set all the nodes score 1 in the range.</p>
<p>then we can update ap and hp.<br>$$<br>a_p = \sum_{q: q\to{p}}^{} h_q\<br>h_p = \sum_{q: p\to{q}}^{} a_q<br>$$</p>
<p>then normalize them using different ways. In lecture slides, it’s defined by this: </p>
<p>$$<br>\sum_{p\in{S}}^{} (a_p)^2 = 1 \<br>\sum_{p\in{S}}^{} (h_p)^2 = 1<br>$$</p>
<p>After several iterations, the algorithm would converge. In practice, 20 iterations produces fairly stable results.</p>
<h3 id="PageRank"><a href="#PageRank" class="headerlink" title="PageRank"></a>PageRank</h3><p>这个算法只注重authority：只要其他文章cite 我的次数越多，我这个权威性就越好</p>
<p>Iterate rank-flowing process until convergence </p>
<p>Rank equation for page p:</p>
<p>$$<br>R(p) = c\sum_{q:q\to{p}}^{} \frac{R(q)}{N_q}<br>$$</p>
<p>$N_q$ represents the number of out-links from q(q as hubs)</p>
<p>c is the normalization constant (sum of R(q) after updating)</p>
<p>To avoid rank sink (some pages has no reference but citing themselves), we can suppose that the browsers would randomly ‘escape’ from the cycle, opening another pages without relevance.</p>
<p>then, new version of rank equation would be</p>
<p>$$<br>R(p) = c((1-\alpha)\sum_{q:q\to{p}}^{} \frac{R(q)}{N_q} + E(p))<br>$$</p>
<p>where E(p) = $\frac{\alpha}{|S|}$</p>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/01/restarto/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2020/04/01/restarto/" class="post-title-link" itemprop="url">我就像个胡适一样</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-04-01 00:21:44 / 修改时间：01:01:23" itemprop="dateCreated datePublished" datetime="2020-04-01T00:21:44+11:00">2020-04-01</time>
            

            
              

              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2020/04/01/restarto/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2020/04/01/restarto/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">205</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前几天写data.frame的时候分组遇到一个问题，先贴代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_df.loc[(data_df[<span class="string">"v3_scope"</span>]==<span class="string">"UNCHANGED"</span>)&amp;(data_df[<span class="string">"v3_privilegesRequired"</span>]==<span class="string">"LOW"</span>),<span class="string">"v3_privilegesRequired"</span>]=<span class="string">"LOW1"</span></span><br></pre></td></tr></table></figure>

<p>python panda 定位条件必须用loc,以及不宜使用太多[][]不然会报错容易错误理解</p>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/18/copyright-test/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/18/copyright-test/" class="post-title-link" itemprop="url">copyright test</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-06-18 10:22:47 / 修改时间：13:03:26" itemprop="dateCreated datePublished" datetime="2019-06-18T10:22:47+10:00">2019-06-18</time>
            

            
              

              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2019/06/18/copyright-test/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2019/06/18/copyright-test/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">12</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这是一个版权声明的测试</p>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
      
        

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/23/Hexo setting up/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yukhon">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/shoe.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yukhon's tech blogs">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2017/06/23/Hexo setting up/" class="post-title-link" itemprop="url">Hexo plugin setting up</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-06-23 00:00:00" itemprop="dateCreated datePublished" datetime="2017-06-23T00:00:00+10:00">2017-06-23</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2020-12-10 00:48:41" itemprop="dateModified" datetime="2020-12-10T00:48:41+11:00">2020-12-10</time>
              
            
          </span>

          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/2017/06/23/Hexo setting up/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/2017/06/23/Hexo setting up/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">41</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">1 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这边就直接记录 hexo各种插件的安装和功能拓展吧</p>
<p>hexo 支持graph作图</p>

          
        
      
    </div>

    

    
    
    

    <div>
      
    </div>

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


      
    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/shoe.jpg" alt="Yukhon">
            
              <p class="site-author-name" itemprop="name">Yukhon</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">8</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/Yukhon" title="GitHub &rarr; https://github.com/Yukhon" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="/1062692035@qq.com" title="E-Mail &rarr; 1062692035@qq.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
            <span id="scrollpercent"><span>0</span>%</span>
          
        </div>
      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yukhon</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">13k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    
    <span title="站点阅读时长">12 分钟</span>
  
</div>










        








        
      </div>
    </footer>

    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'lMq9jXIffTgBJEKQQYoMQs90-gzGzoHsz',
    appKey: 'ONo2I8wGO4iAcrJyqICWDeGz',
    placeholder: '评论就送屠龙宝刀',
    avatar: 'mm',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn'
  });
</script>





  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true}});</script></body>
</html>
